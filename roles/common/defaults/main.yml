# --- Common role defaults (shared vars consumed by multiple tasks) ---
# --- System defaults ---
# Target timezone to apply to hosts
common_timezone: Etc/UTC
# Whether to install and manage chrony for time synchronization
common_install_chrony: true
# Flag set by tasks when a reboot is required
common_reboot_needed: false
# SSH port enforced on managed hosts
common_ssh_port: 2000

# --- Control host paths ---
# Base dir on control node for generated artifacts and cached data
common_control_base_dir: "{{ lookup('env', 'HOME') ~ '/.ansible/common' }}"
# Location for per-host variables stored locally
common_control_local_vars_dir: "{{ common_control_base_dir ~ '/local_vars' }}"
# Directory where keys generated by the role are written
common_control_generated_keys_dir: "{{ common_control_base_dir ~ '/generated_keys' }}"
# Path to the vault password file used for encrypted data
common_control_vault_password_file: "{{ common_control_base_dir ~ '/.vault_password' }}"

# --- Tailscale defaults ---
# Auth key used to join nodes to the tailnet (empty when unset)
common_tailscale_authkey: "{{ vault_common_tailscale_authkey | default('') }}"
# Custom login server for the tailnet
common_tailscale_login_server: "https://vpn.salamatov.net"
# Base URL for manually downloading Tailscale packages
common_tailscale_manual_download_base: "https://pkgs.tailscale.com/stable"
# Metadata endpoint for Tailscale package discovery
common_tailscale_manual_metadata_url: >-
  https://pkgs.tailscale.com/stable/?mode=json

# --- Map Ansible-reported architectures to Tailscale tarball names ---
common_tailscale_arch_map:
  x86_64: amd64
  amd64: amd64
  aarch64: arm64
  arm64: arm64
  armv8l: arm64
  armv8: arm64
  armv7l: arm
  armv7: arm
  armhf: arm
  arm: arm
  i386: "386"
  i686: "386"

# --- Alloy/Grafana Cloud defaults ---
# Installer script URL for Alloy agent deployment
common_alloy_install_script_url: >-
  https://storage.googleapis.com/cloud-onboarding/alloy/scripts/install-linux.sh
# Grafana Cloud metrics instance ID
common_alloy_metrics_id: "{{ vault_common_alloy_metrics_id | default('') }}"
# Remote URL for metrics ingestion
common_alloy_metrics_url: "{{ vault_common_alloy_metrics_url | default('') }}"
# Grafana Cloud logs instance ID
common_alloy_logs_id: "{{ vault_common_alloy_logs_id | default('') }}"
# Remote URL for log ingestion
common_alloy_logs_url: "{{ vault_common_alloy_logs_url | default('') }}"
# Flow metrics API endpoint
common_alloy_fm_url: "{{ vault_common_alloy_fm_url | default('') }}"
# Interval Alloy uses to poll flow metrics API
common_alloy_fm_poll_frequency: "{{ vault_common_alloy_fm_poll_frequency | default('60s') }}"
# Hosted flow metrics collector ID
common_alloy_fm_hosted_id: "{{ vault_common_alloy_fm_hosted_id | default('') }}"
# Token used by Alloy integrations to authenticate with Grafana Cloud
common_alloy_integration_token: "{{ vault_common_alloy_integration_token | default('') }}"
